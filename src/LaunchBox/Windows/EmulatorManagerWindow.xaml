<Window x:Class="LaunchBox.Windows.EmulatorManagerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Emulator Manager - LaunchBox"
        Height="700" Width="1000"
        WindowStartupLocation="CenterOwner"
        Background="#1E1E1E">

    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="350"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Emulator List -->
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Text="Emulators" FontSize="20" FontWeight="Bold"
                      Foreground="White" Margin="0,0,0,10"/>

            <ListBox Grid.Row="1" x:Name="EmulatorListBox" Background="#252526"
                    Foreground="White" BorderBrush="#3E3E42"
                    SelectionChanged="EmulatorListBox_SelectionChanged">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Margin="5">
                            <TextBlock Text="{Binding Name}" FontWeight="Bold"/>
                            <TextBlock Text="{Binding Platform.Name, FallbackValue='All Platforms'}"
                                      Foreground="#888888" FontSize="11"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <StackPanel Grid.Row="2" Margin="0,10,0,0">
                <Button Content="âž• Add Emulator" Click="AddEmulator_Click" Padding="10,8" Margin="0,0,0,5"/>
                <Button Content="ðŸ” Auto-Detect Emulators" Click="AutoDetect_Click" Padding="10,8" Margin="0,0,0,5"/>
                <Button Content="ðŸ—‘ï¸ Delete Selected" Click="DeleteEmulator_Click" Padding="10,8" IsEnabled="{Binding ElementName=EmulatorListBox, Path=SelectedItem, Converter={StaticResource NullToBoolConverter}}"/>
            </StackPanel>
        </Grid>

        <!-- Emulator Details -->
        <Border Grid.Column="1" Background="#252526" Margin="10,0,0,0" Padding="20">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel x:Name="DetailsPanel" IsEnabled="{Binding ElementName=EmulatorListBox, Path=SelectedItem, Converter={StaticResource NullToBoolConverter}}">
                    <TextBlock Text="Emulator Configuration" FontSize="20" FontWeight="Bold"
                              Foreground="White" Margin="0,0,0,20"/>

                    <!-- Name -->
                    <TextBlock Text="Name:" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                    <TextBox x:Name="NameTextBox" Padding="8" Margin="0,0,0,15"
                            Background="#1E1E1E" Foreground="White" BorderBrush="#3E3E42"/>

                    <!-- Executable Path -->
                    <TextBlock Text="Executable Path:" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                    <Grid Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="ExecutablePathTextBox" Padding="8"
                                Background="#1E1E1E" Foreground="White" BorderBrush="#3E3E42"/>
                        <Button Grid.Column="1" Content="Browse..." Click="BrowseExecutable_Click"
                               Padding="10,8" Margin="5,0,0,0"/>
                    </Grid>

                    <!-- Command Line Arguments -->
                    <TextBlock Text="Command Line Arguments:" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                    <TextBox x:Name="ArgumentsTextBox" Padding="8" Margin="0,0,0,5"
                            Background="#1E1E1E" Foreground="White" BorderBrush="#3E3E42"/>
                    <TextBlock Text="Use {0} as placeholder for ROM path"
                              Foreground="#666666" FontSize="11" Margin="0,0,0,15"/>

                    <!-- Platform -->
                    <TextBlock Text="Platform:" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                    <ComboBox x:Name="PlatformComboBox" Padding="8" Margin="0,0,0,15"
                             DisplayMemberPath="Name" Background="#1E1E1E" Foreground="White"/>

                    <!-- Working Directory -->
                    <TextBlock Text="Working Directory (Optional):" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                    <TextBox x:Name="WorkingDirectoryTextBox" Padding="8" Margin="0,0,0,15"
                            Background="#1E1E1E" Foreground="White" BorderBrush="#3E3E42"/>

                    <!-- Options -->
                    <CheckBox x:Name="UseQuotesCheckBox" Content="Use quotes for ROM path" Foreground="White" IsChecked="True" Margin="0,0,0,5"/>
                    <CheckBox x:Name="IsDefaultCheckBox" Content="Set as default for platform" Foreground="White" Margin="0,0,0,20"/>

                    <!-- Validation Status -->
                    <Border x:Name="ValidationPanel" Background="#2D2D30" Padding="10" CornerRadius="5" Visibility="Collapsed">
                        <StackPanel>
                            <TextBlock x:Name="ValidationText" Foreground="White" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>

                    <!-- Actions -->
                    <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                        <Button Content="ðŸ’¾ Save" Click="SaveEmulator_Click" Padding="15,8" Margin="0,0,10,0"/>
                        <Button Content="ðŸ§ª Test" Click="TestEmulator_Click" Padding="15,8" Margin="0,0,10,0"/>
                        <Button Content="âœ“ Validate" Click="ValidateEmulator_Click" Padding="15,8"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</Window>
